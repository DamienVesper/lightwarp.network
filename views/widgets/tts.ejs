<link rel="stylesheet" href="/assets/css/widget.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.min.js"></script>
<div class="tts-wrapper"></div>

<script>
    const proto = window.location.protocol;
    const socket = io.connect(`${proto}//<%=webfront%>:${proto === `http:` ? `4550`: `443`}`, {
        secure: true,
        rejectUnauthorized: true,
        withCredentials: true
    });
    socket.on(`broadcast`, (data) => {
        console.log(data)
        const speech = new SpeechSynthesisUtterance();
        speech.lang = "en-US";
        speech.text = `Priority Message from ${data.name} for 3 Dollars. ${data.prioritymessage}`;
        speech.volume = 1;
        speech.rate = 1;
        speech.pitch = 1;
        window.speechSynthesis.speak(speech);
    })
</script>
